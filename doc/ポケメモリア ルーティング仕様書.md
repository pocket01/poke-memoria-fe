# ポケメモリア ルーティング仕様書

## 概要

本書では、ポケメモリアのWebアプリケーションにおけるルーティング（URL設計）の仕様を定義する。Next.js App Routerを使用し、ウィザード形式で履歴書を作成する各ステップに固有のURLを持たせることで、ブラウザの「戻る」ボタンの直感的な動作と、ステップのリロード時の状態保持を実現する。

## ルーティング構成

### URL構成表

| パス | 役割 | 対応するStep | 説明 |
| --- | --- | --- | --- |
| `/create` | イントロダクション | 導入 | 履歴書作成の開始画面 |
| `/create/origin` | 初めての冒険を選択 | Step 1 | プレイした最初のポケモン作品を選択 |
| `/create/history` | プレイ作品・スタンプ選択 | Step 2 | プレイした作品の履歴とスタンプを選択 |
| `/create/partners` | 相棒の選択とコメント | Step 3 | 思い出のポケモンを選択しコメントを記入 |
| `/create/identity` | 属性・スタイル・自由記述 | Step 4 | トレーナー情報とタグを入力 |
| `/create/preview` | 最終確認と保存 | 生成・プレビュー | 作成した履歴書の最終確認と保存 |

### ディレクトリ構造

`app/create/` 配下の構成：

```text
app/create/
├── layout.tsx          # 共通レイアウト（ResumeProvider配置）
├── page.tsx            # 導入画面 (/create)
├── [step]/             # 動的ルーティングでステップを管理
│   └── page.tsx        # 各ステップのページ
├── origin/             # Step 1: 初めての冒険
│   └── page.tsx
├── history/            # Step 2: プレイ作品・スタンプ選択
│   └── page.tsx
├── partners/           # Step 3: 相棒の選択とコメント
│   └── page.tsx
├── identity/           # Step 4: 属性・スタイル・自由記述
│   └── page.tsx
└── preview/            # 最終確認と保存
    └── page.tsx
```

> **Note**: プロジェクト全体のディレクトリ構成については [README.md](../README.md#-ディレクトリ構成) を参照してください。

## 設計方針

### 1. 固有URLの採用理由

- **ブラウザの戻るボタン対応**: ユーザーが前のステップに戻る際、ブラウザの戻るボタンで直感的に操作できる
- **リロード時の状態保持**: 特定のステップをリロードしても、最初からやり直しにならない
- **URL共有**: 特定のステップへの直接アクセスが可能（開発・デバッグ時に有用）

### 2. 画面遷移の流れ

```text
/create
  ↓
/create/origin
  ↓
/create/history
  ↓
/create/partners
  ↓
/create/identity
  ↓
/create/preview
```

### 3. ナビゲーション実装

- `useRouter`フックを使用して次のURLへ遷移
- 「次へ」ボタンの共通化により、各ページの実装を簡素化
- 共通ナビゲーションコンポーネントの作成を推奨

## 技術仕様

- **フレームワーク**: Next.js (App Router)
- **ルーティング方式**: ファイルシステムベースルーティング
- **遷移制御**: `next/navigation`の`useRouter`を使用

## 備考

- 各ページのレイアウトは`create/layout.tsx`で共通化
- 状態管理は`ResumeProvider`を通じて各ページで利用可能（詳細は「状態管理仕様書」を参照）
